<div class="flex justify-between items-center mb-6">
  <h3 class="text-2xl font-bold">Your Menu</h3>
  <button (click)="openAddModal()" class="btn-primary px-4 py-2 rounded-lg font-semibold">Add New Item</button>
</div>
<div class="bg-surface rounded-lg border border-border">
  <table class="min-w-full">
    <thead class="border-b border-border">
      <tr>
        <th class="px-6 py-3 text-left">Item</th>
        <th class="px-6 py-3 text-left">Category</th>
        <th class="px-6 py-3 text-left">Price</th>
        <th class="px-6 py-3 text-left">Available</th>
        <th class="px-6 py-3 text-right">Actions</th>
      </tr>
    </thead>
    <tbody>
      @for (item of menuItems(); track item.id) {
        <tr class="border-b border-border">
          <td class="px-6 py-4">
            <div class="flex items-center">
              <img class="h-10 w-10 rounded-full object-cover" [src]="(item.imageUrl | fullUrl) || 'https://placehold.co/40x40'" [alt]="item.name">
              <div class="ml-4">
                <div class="font-medium">{{ item.name }}</div>
                <div class="text-sm text-text-muted">{{ item.description }}</div>
              </div>
            </div>
          </td>
          <td class="px-6 py-4 text-text-muted">
            <div class="font-semibold">{{ (item.dietaryType || '').replace('_', ' ') }}</div>
            <div class="text-xs">{{ (item.category || '').replace('_', ' ') }}</div>
          </td>
          <td class="px-6 py-4">â‚¹{{ item.price.toFixed(2) }}</td>
          <td class="px-6 py-4">
            <label class="switch">
              <input type="checkbox" [checked]="item.available" (change)="toggleAvailability(item.id)">
              <span class="slider"></span>
            </label>
          </td>
          <td class="px-6 py-4 text-right text-sm font-medium">
            <button class="text-indigo-400 hover:text-indigo-300 mr-4" (click)="openEditModal(item)">Edit</button>
            <button class="text-red-500 hover:text-red-400" (click)="deleteItem(item.id)">Delete</button>
          </td>
        </tr>
      } @empty {
        <tr>
          <td colspan="5" class="text-center text-text-muted p-6">You have not added any menu items yet.</td>
        </tr>
      }
    </tbody>
  </table>
</div>

@if (isModalOpen()) {
  <app-menu-item-modal 
    [menuItem]="currentItemForEdit()" 
    (close)="closeModal()"
    (save)="handleSave()">
  </app-menu-item-modal>
}