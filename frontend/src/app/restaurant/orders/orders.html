<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- PENDING COLUMN -->
    <div>
        <h3 class="text-lg font-semibold mb-4 text-yellow-400 border-b-2 border-yellow-400 pb-2">PENDING</h3>
        <div class="space-y-4 h-full">
            @for(order of pendingOrders(); track order.id) {
                <div class="bg-surface p-4 rounded-lg shadow-md border border-border flex flex-col justify-between">
                    <div>
                        <div class="flex justify-between items-start">
                            <p class="font-bold text-lg">Order #{{ order.id }}</p>
                            <p class="font-bold text-primary text-lg">â‚¹{{ order.totalPrice.toFixed(2) }}</p>
                        </div>
                        <p class="text-sm text-text-muted mb-3">By: {{ order.customerName }}</p>
                        <div class="border-t border-border pt-2 mt-2">
                            <ul class="text-sm space-y-1 text-text-muted">
                                @for(item of order.items; track $index) {
                                    <li>{{ item.quantity }} x {{ item.itemName }}</li>
                                }
                            </ul>
                        </div>
                    </div>
                    <div class="mt-4 flex gap-2">
                        <button (click)="acceptOrder(order)" class="btn-success text-sm font-semibold py-1 px-2 rounded-md flex-1">Accept</button>
                        <button (click)="rejectOrder(order)" class="btn-danger text-sm font-semibold py-1 px-2 rounded-md flex-1">Reject</button>
                    </div>
                </div>
            } @empty { 
                <div class="bg-surface p-4 rounded-lg text-center text-sm text-text-muted">No pending orders.</div> 
            }
        </div>
    </div>

    <!-- PREPARING COLUMN -->
    <div>
        <h3 class="text-lg font-semibold mb-4 text-blue-400 border-b-2 border-blue-400 pb-2">PREPARING</h3>
        <div class="space-y-4 h-full">
            @for(order of preparingOrders(); track order.id) {
                <div class="bg-surface p-4 rounded-lg shadow-md border border-border flex flex-col justify-between">
                    <div>
                        <p class="font-bold text-lg">Order #{{ order.id }}</p>
                        <p class="text-sm text-text-muted mb-3">For: {{ order.customerName }}</p>
                        <div class="border-t border-border pt-2 mt-2">
                            <ul class="text-sm space-y-1 text-text-muted">
                                @for(item of order.items; track $index) {
                                    <li>{{ item.quantity }} x {{ item.itemName }}</li>
                                }
                            </ul>
                        </div>
                    </div>
                    <button (click)="readyForPickup(order)" class="btn-primary mt-4 w-full text-sm font-semibold py-2 px-2 rounded-md">
                        Ready for Pickup
                    </button>
                </div>
            } @empty { 
                <div class="bg-surface p-4 rounded-lg text-center text-sm text-text-muted">No orders being prepared.</div> 
            }
        </div>
    </div>

    <!-- OUT FOR DELIVERY COLUMN -->
    <div>
        <h3 class="text-lg font-semibold mb-4 text-purple-400 border-b-2 border-purple-400 pb-2">OUT FOR DELIVERY</h3>
        <div class="space-y-4 h-full">
             @for(order of deliveryOrders(); track order.id) {
                <div class="bg-surface p-4 rounded-lg shadow-md border border-border">
                    <p class="font-bold text-lg">Order #{{ order.id }}</p>
                    <p class="text-sm text-text-muted mb-3">To: {{ order.customerName }}</p>
                    <div class="border-t border-border pt-2 mt-2">
                        <ul class="text-sm space-y-1 text-text-muted">
                            @for(item of order.items; track $index) {
                                <li>{{ item.quantity }} x {{ item.itemName }}</li>
                            }
                        </ul>
                    </div>
                </div>
            } @empty {
                <div class="bg-surface p-4 rounded-lg text-center text-sm text-text-muted">No orders out for delivery.</div> 
            }
        </div>
    </div>

     <!-- DELIVERED COLUMN -->
     <div>
        <h3 class="text-lg font-semibold mb-4 text-green-400 border-b-2 border-green-400 pb-2">DELIVERED</h3>
        <div class="space-y-4 h-full">
             @for(order of deliveredOrders(); track order.id) {
                <div class="bg-surface p-4 rounded-lg shadow-md border border-border">
                    <p class="font-bold text-lg">Order #{{ order.id }}</p>
                    <p class="text-sm text-text-muted mb-3">Delivered to: {{ order.customerName }}</p>
                    <div class="border-t border-border pt-2 mt-2">
                         <ul class="text-sm space-y-1 text-text-muted">
                            @for(item of order.items; track $index) {
                                <li>{{ item.quantity }} x {{ item.itemName }}</li>
                            }
                        </ul>
                    </div>
                    @if(order.hasReview) {
                        <div class="mt-3 pt-3 border-t border-border text-sm">
                            <p class="font-semibold text-yellow-400">Rating: {{ '&#9733;'.repeat(order.reviewRating || 0) }}</p>
                            @if(order.reviewComment){
                                <p class="text-text-muted italic">"{{ order.reviewComment }}"</p>
                            }
                        </div>
                    }
                </div>
            } @empty {
                <div class="bg-surface p-4 rounded-lg text-center text-sm text-text-muted">No delivered orders.</div> 
            }
        </div>
    </div>
</div>