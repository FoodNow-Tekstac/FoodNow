<main class="page-container">
  @if (order(); as currentOrder) {
    <div class="page-header">
      <a routerLink="/customer/orders" class="back-link">&larr; Back to My Orders</a>
      <h1 class="page-title">Tracking Order #{{ currentOrder.id }}</h1>
    </div>
    
    <div class="content-grid">
      <div class="map-container">
        @if (currentOrder.restaurantLocationPin) {
          <div id="map" class="map-element"></div>
        } @else {
          <div class="map-unavailable">
            Location tracking not available for this restaurant.
          </div>
        }
      </div>

      <div class="details-card">
        <h3 class="restaurant-name">{{ currentOrder.restaurantName }}</h3>
        <p class="status-text">
          Status: 
          <span class="status-badge" [class]="'status-' + currentOrder.status.toLowerCase()">
            {{ currentOrder.status.replace('_', ' ') }}
          </span>
        </p>
        <div class="address-section">
          <p class="font-semibold">Delivery Address:</p>
          <p class="text-text-dark">{{ currentOrder.deliveryAddress }}</p>
        </div>
        <div class="items-section">
           <p class="font-semibold">Items:</p>
            <ul class="items-list">
              @for (item of currentOrder.items; track $index) {
                <li>{{ item.quantity }} x {{ item.itemName }}</li>
              }
            </ul>
        </div>
      </div>
    </div>
  } @else {
    <div class="text-center p-8">
      <p class="text-text-dark">Loading order details...</p>
    </div>
  }
</main>